(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/setting/change-userInfo/upload"],{"051f":function(e,o,n){"use strict";n.r(o);var t=n("7743"),a=n.n(t);for(var r in t)"default"!==r&&function(e){n.d(o,e,function(){return t[e]})}(r);o["default"]=a.a},"256d":function(e,o,n){"use strict";var t=function(){var e=this,o=e.$createElement;e._self._c},a=[];n.d(o,"a",function(){return t}),n.d(o,"b",function(){return a})},"2fbc":function(e,o,n){},7743:function(e,o,n){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t=n("2f62"),a=c(n("8059")),r=(c(n("ebcf")),c(n("0b38")));function c(e){return e&&e.__esModule?e:{default:e}}var u=e.getSystemInfoSync(),i=u.windowWidth,s=u.windowHeight-50;console.log(u);var l={computed:(0,t.mapState)(["hasLogin","userInfo","token"]),data:function(){return{cropperOpt:{id:"cropper",width:i,height:s,scale:2.5,zoom:8,cut:{x:(i-295)/2,y:(s-295)/2,width:295,height:295}},weCropper:""}},methods:{back:function(){e.redirectTo({url:"change-userInfo"})},touchStart:function(e){this.weCropper.touchStart(e)},touchMove:function(e){this.weCropper.touchMove(e)},touchEnd:function(e){this.weCropper.touchEnd(e)},convertBase64UrlToBlob:function(e,o){for(var n=atob(e.split(",")[1]),t=[],a=0;a<n.length;a++)t.push(n.charCodeAt(a));return new Blob([new Uint8Array(t)],{type:o},{filename:"1111.jpg"})},blobToDataURL:function(e){var o=new FileReader;o.readAsDataURL(e),o.onload=function(e){var o=e.target.result;console.log(o)}},getCropperImage:function(){var o=this,n=r.default.urls.postHead;this.weCropper.getCropperImage(function(t){if(t){console.log(t),wx.redirectTo({url:"change-userInfo?avatar="+t});var a=o;e.uploadFile({url:n,filePath:t,name:"image",header:{token:a.token},success:function(o){console.log("uploadImage success, res is:",o),e.showToast({title:"上传成功",icon:"success",duration:1e3})},fail:function(o){console.log("uploadImage fail",o),e.showModal({content:o.errMsg,showCancel:!1}),e.hideLoading()},complete:function(){console.log("complate")}})}else console.log("获取图片失败，请稍后重试")})},uploadTap:function(){var o=this;e.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(e){var n=e.tempFilePaths[0];o.weCropper.pushOrign(n)}})}},onLoad:function(o){console.log(i,s,u);var n=this.cropperOpt,t=o.src;t&&(Object.assign(n,{src:t}),console.log(t),this.weCropper=new a.default(n).on("ready",function(e){console.log("reday")}).on("beforeImageLoad",function(o){e.showToast({title:"上传中",icon:"loading",duration:3e3}),console.log("beforeImageLoad")}).on("imageLoad",function(o){e.hideToast(),console.log("imageLoad")}))}};o.default=l}).call(this,n("543d")["default"])},"83d3":function(e,o,n){"use strict";n.r(o);var t=n("256d"),a=n("051f");for(var r in a)"default"!==r&&function(e){n.d(o,e,function(){return a[e]})}(r);n("d77e");var c=n("2877"),u=Object(c["a"])(a["default"],t["a"],t["b"],!1,null,null,null);o["default"]=u.exports},d77e:function(e,o,n){"use strict";var t=n("2fbc"),a=n.n(t);a.a}},[["ec47","common/runtime","common/vendor"]]]);