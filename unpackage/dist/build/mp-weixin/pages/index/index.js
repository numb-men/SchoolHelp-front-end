(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"148f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;s(n("ebcf"));var a=s(n("0b38")),i=n("b575");function s(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{scrollLeft:0,currentTab:0,tabClick:0,isHeight:"",isLeft:0,agents:[{title:"学术论坛",list:[],id:0,pages:0},{title:"校园动态",list:[],id:1,pages:0},{title:"二手交易",list:[],id:2,pages:0},{title:"缺个伴吗",list:[],id:3,pages:0},{title:"帮你干活",list:[],id:4,pages:0},{title:"经验交流",list:[],id:5,pages:0}],isWidth:0,imageList:[{src:"../../static/images/news-1.png"},{src:"../../static/images/news-2.png"},{src:"../../static/images/news-3.png"},{src:"../../static/images/news-4.png"}]}},mounted:function(){this.isHeight=300*this.agents[this.currentTab].list.length+160+"rpx"},methods:{goAddPost:function(){t.navigateTo({url:"add-post/add-post"})},goDetail:function(e){var n=e.currentTarget.dataset.index,a=this.agents[this.currentTab].list[n].postId;console.log(a);var i={postId:a};t.navigateTo({url:"post-detail/post-detail?query="+encodeURIComponent(JSON.stringify(i))})},goSearch:function(){t.navigateTo({url:"search-post/search-post"})},navClick:function(e){this.currentTab=e,this.tabClick=e;var n=this,s=a.default.urls.getPostList,o={num:0,postType:n.currentTab};a.default.req.get(s,o,function(t){if(0===t.code&&0==t.data.empty){for(var a=0;a<t.data.content.length;a++)t.data.content[a].issueTime=(0,i.friendlyDate)(new Date(t.data.content[a].issueTime.replace(/\-/g,"/").replace(/\T/g," ").substring(0,19)).getTime());n.agents[e].list=t.data.content,console.log(n.agents[e].list.length)}},function(e){setTimeout(function(){t.hideLoading(),t.stopPullDownRefresh(),t.showToast({icon:"none",title:"刷新失败，请稍后再试"})},4e3)})},swiperTab:function(e){console.log(e);var n=e.detail.current;if(this.isHeight=300*this.agents[n].list.length+160+"rpx",this.isLeft=n*this.isWidth,this.currentTab=e.detail.current,this.tabClick=e.detail.current,4==this.currentTab?this.scrollLeft=150:5==this.currentTab&&(this.scrollLeft=150),1!=this.currentTab&&0!=this.currentTab||(this.scrollLeft=0),0===this.agents[n].list.length){var s=this,o=a.default.urls.getPostList,r={num:0,postType:s.currentTab};a.default.req.get(o,r,function(t){if(0===t.code&&0==t.data.empty){for(var e=0;e<t.data.content.length;e++)t.data.content[e].issueTime=(0,i.friendlyDate)(new Date(t.data.content[e].issueTime.replace(/\-/g,"/").replace(/\T/g," ").substring(0,19)).getTime());s.agents[s.currentTab].list=t.data.content,s.isHeight=300*s.agents[s.currentTab].list.length+160+"rpx"}},function(e){setTimeout(function(){t.hideLoading(),t.stopPullDownRefresh(),t.showToast({icon:"none",title:"刷新失败，请稍后再试"})},4e3)})}}},onPullDownRefresh:function(){console.log("刷新第".concat(this.currentTab,"项"));var e=this,n=a.default.urls.getPostList,s={num:0,postType:e.currentTab};a.default.req.get(n,s,function(n){if(0===n.code&&0==n.data.empty){for(var a=0;a<n.data.content.length;a++)n.data.content[a].issueTime=(0,i.friendlyDate)(new Date(n.data.content[a].issueTime.replace(/\-/g,"/").replace(/\T/g," ").substring(0,19)).getTime());e.agents[e.currentTab].list=n.data.content,e.isHeight=300*e.agents[e.currentTab].list.length+160+"rpx"}t.stopPullDownRefresh()},function(e){setTimeout(function(){t.hideLoading(),t.stopPullDownRefresh(),t.showToast({icon:"none",title:"刷新失败，请稍后再试"})},4e3)})},onReachBottom:function(){var e=this;console.log("加载".concat(this.currentTab)),t.showLoading({content:"加载中"});var n=this;if(0!==n.agents[n.currentTab].list.length){var s=a.default.urls.getPostList,o={num:n.agents[this.currentTab].pages,postType:n.currentTab};a.default.req.get(s,o,function(a){if(0===a.code&&0==a.data.empty){for(var s=0;s<a.data.content.length;s++)a.data.content[s].issueTime=(0,i.friendlyDate)(new Date(a.data.content[s].issueTime.replace(/\-/g,"/").replace(/\T/g," ").substring(0,19)).getTime());for(s=0;s<a.data.content.length;s++)n.agents[n.currentTab].list.push(a.data.content[s]);n.agents[e.currentTab].pages=n.agents[e.currentTab].pages+1,n.isHeight=300*n.agents[n.currentTab].list.length+160+"rpx",t.hideLoading()}else t.hideLoading(),t.showToast({icon:"none",title:"你已经看到我的底线啦！"})},function(e){setTimeout(function(){t.hideLoading(),t.stopPullDownRefresh(),t.showToast({icon:"none",title:"刷新失败，请稍后再试"})},4e3)})}else t.hideLoading(),t.showToast({icon:"none",title:"你已经看到我的底线啦！"})},onShow:function(){var e=this,n=this,s=a.default.urls.getPostList,o={num:0,postType:n.currentTab};a.default.req.get(s,o,function(t){if(0===t.code&&0==t.data.empty){for(var a=0;a<t.data.content.length;a++)t.data.content[a].issueTime=(0,i.friendlyDate)(new Date(t.data.content[a].issueTime.replace(/\-/g,"/").replace(/\T/g," ").substring(0,19)).getTime());n.agents[e.currentTab].pages=n.agents[e.currentTab].pages+1,n.agents[n.currentTab].list=t.data.content,n.isHeight=300*n.agents[n.currentTab].list.length+160+"rpx"}},function(e){setTimeout(function(){t.hideLoading(),t.stopPullDownRefresh(),t.showToast({icon:"none",title:"刷新失败，请稍后再试"})},4e3)})}};e.default=o}).call(this,n("543d")["default"])},4993:function(t,e,n){},"7cf9":function(t,e,n){"use strict";n.r(e);var a=n("148f"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e["default"]=i.a},dc61:function(t,e,n){"use strict";n.r(e);var a=n("f83f"),i=n("7cf9");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("e56f");var o=n("2877"),r=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,"4e919976",null);e["default"]=r.exports},e56f:function(t,e,n){"use strict";var a=n("4993"),i=n.n(a);i.a},f83f:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})}},[["c4aa","common/runtime","common/vendor"]]]);