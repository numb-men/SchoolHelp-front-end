(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-setting-account-security-change-password-change-password"],{"20e8":function(e,t,a){"use strict";a.r(t);var s=a("e4f2"),o=a("ba8b");for(var n in o)"default"!==n&&function(e){a.d(t,e,function(){return o[e]})}(n);a("efa6");var i=a("2877"),r=Object(i["a"])(o["default"],s["a"],s["b"],!1,null,"5824f8ce",null);t["default"]=r.exports},"781c":function(e,t,a){var s=a("a128");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var o=a("4f06").default;o("dd7acb2e",s,!0,{sourceMap:!1,shadowMode:!1})},a128:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".content[data-v-5824f8ce]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background-color:#efeff4}",""])},a768:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a("2f62"),o=l(a("58cc")),n=l(a("8030")),i=l(a("a35e")),r=a("0f52");function l(e){return e&&e.__esModule?e:{default:e}}var c={computed:(0,s.mapState)(["hasLogin","userInfo","token"]),components:{mInput:o.default},data:function(){return{}},methods:{register:function(){var e=this,t=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/;if(this.password.length<8)uni.showToast({icon:"none",title:"密码最短为 8 个字符"});else if(t.test(this.password))if(this.password==this.checkPassword){var a=this,s=i.default.urls.changePassword,o={oldPassword:(0,r.hex_md5)(a.oldPassword),newPassword:(0,r.hex_md5)(a.password)};i.default.req.put(s,o,function(t){if(0===t.code){uni.showToast({icon:"none",title:"修改成功"});var s=i.default.urls.login,o={phone:e.userInfo.phone,password:(0,r.hex_md5)(a.password)};i.default.req.get(s,o,function(e){if(0===e.code){n.default.commit("login",e.data,o.phone,o.password);var t=i.default.urls.getSelfUserInfo,a={};i.default.req.get(t,a,function(e){if(0===e.code){var t=i.default.urls.getHead,a={};i.default.req.get(t,a,function(t){if(0===t.code){var a=e.data;a.headUrl=t.data,delete a.password,n.default.commit("saveUserInfo",a)}else{var s=e.data;s.headUrl="/static/icons/logo.png",delete s.password,n.default.commit("saveUserInfo",s)}})}else uni.showModal({content:e.msg,showCancel:!1})})}else uni.showModal({content:e.msg,showCancel:!1})}),uni.navigateBack()}else uni.showModal({content:t.msg,showCancel:!1})})}else uni.showToast({icon:"none",title:"两次密码不一致"});else uni.showToast({icon:"none",title:"密码必须为字母和数字的组合"})}}};t.default=c},ba8b:function(e,t,a){"use strict";a.r(t);var s=a("a768"),o=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,function(){return s[e]})}(n);t["default"]=o.a},e4f2:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-form",{staticClass:"content",on:{submit:function(t){t=e.$handleEvent(t),e.register(t)}}},[a("v-uni-view",{staticClass:"input-group"},[a("v-uni-view",{staticClass:"input-row border"},[a("v-uni-text",{staticClass:"title"},[e._v("旧  密  码：")]),a("m-input",{attrs:{type:"password",displayable:"",maxlength:"16",placeholder:"请输入正在使用的密码"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1),a("v-uni-view",{staticClass:"input-row border"},[a("v-uni-text",{staticClass:"title"},[e._v("新  密  码：")]),a("m-input",{attrs:{type:"password",displayable:"",maxlength:"16",placeholder:"至少8位数字与字母组合"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-uni-view",{staticClass:"input-row border"},[a("v-uni-text",{staticClass:"title"},[e._v("确认密码：")]),a("m-input",{attrs:{type:"password",displayable:"",maxlength:"16",placeholder:"请输入密码"},model:{value:e.checkPassword,callback:function(t){e.checkPassword=t},expression:"checkPassword"}})],1)],1),a("v-uni-view",{staticClass:"btn-row"},[a("v-uni-button",{staticClass:"primary",attrs:{type:"primary",formType:"submit"}},[e._v("修改")])],1)],1)},o=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return o})},efa6:function(e,t,a){"use strict";var s=a("781c"),o=a.n(s);o.a}}]);