(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/login/login"],{"1aa2":function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o("2f62");function e(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{},a=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),a.forEach(function(n){i(t,n,o[n])})}return t}function i(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var s=function(){return o.e("components/m-input").then(o.bind(null,"ce9b"))},c={components:{mInput:s},data:function(){return{loading:!1,providerList:[],hasProvider:!1,account:"",password:"",positionTop:0,msg:""}},computed:(0,a.mapState)(["forcedLogin"]),methods:e({initPosition:function(){this.positionTop=t.getSystemInfoSync().windowHeight-100},bindLogin:function(){var n=this,o=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/;if(11!=this.account.length)return this.loading=!1,void t.showToast({icon:"none",title:"请检查手机号是否正确"});if(!/^1(3|4|5|7|8)\d{9}$/.test(this.account))return this.loading=!1,void t.showToast({icon:"none",title:"手机号只能为11位数字"});if(this.password.length<8)return this.loading=!1,void t.showToast({icon:"none",title:"密码最短为 8 个字符"});if(!o.test(this.password))return this.loading=!1,void t.showToast({icon:"none",title:"密码必须为字母和数字的组合"});var a={account:this.account,password:this.password};t.request({url:"http://134.175.16.143:8080/schoolhelp-1.0.1/login",method:"GET",data:{phone:a.account,password:a.password},success:function(o){0===o.data.code?(t.showToast({icon:"none",title:"登陆成功"}),t.request({url:"http://134.175.16.143:8080/schoolhelp-1.0.1/user",method:"GET",header:{token:o.data.data},success:function(a){0===a.data.code&&t.request({url:"http://134.175.16.143:8080/schoolhelp-1.0.1/download/head",method:"GET",header:{token:o.data.data},success:function(e){function i(t,n,o,a,e,i,s,c){this.name=t,this.token=n,this.fallow=o,this.collect=a,this.points=e,this.post=i,this.comment=s,this.url=c}if(0===e.data.code){var s=new i(a.data.data.name,o.data.data,a.data.data.fallowNum,a.data.data.collectPostNum,a.data.data.points,a.data.data.postNum,a.data.data.commentNum,"http://"+e.data.data);n.login(s),t.navigateBack()}},fail:function(){t.showModal({content:"获取用户头像失败！",showCancel:!1})}})},fail:function(){t.showModal({content:"获取用户信息失败！",showCancel:!1})}})):t.showModal({content:"用户名密码错误！",showCancel:!1})},fail:function(n){t.showModal({content:"请求失败，请重试！",showCancel:!1})}})},toMain:function(n){this.login(n),this.forcedLogin?t.reLaunch({url:"../my"}):t.navigateBack()}},(0,a.mapMutations)(["login"])),onReady:function(){this.initPosition()}};n.default=c}).call(this,o("6e42")["default"])},"36bc":function(t,n,o){"use strict";o.r(n);var a=o("1aa2"),e=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(n,t,function(){return a[t]})}(i);n["default"]=e.a},"4d8b":function(t,n,o){"use strict";var a=function(){var t=this,n=t.$createElement;t._self._c},e=[];o.d(n,"a",function(){return a}),o.d(n,"b",function(){return e})},"6a7e":function(t,n,o){"use strict";var a=o("9e74"),e=o.n(a);e.a},"9e74":function(t,n,o){},dd54:function(t,n,o){"use strict";o.r(n);var a=o("4d8b"),e=o("36bc");for(var i in e)"default"!==i&&function(t){o.d(n,t,function(){return e[t]})}(i);o("6a7e");var s=o("2877"),c=Object(s["a"])(e["default"],a["a"],a["b"],!1,null,null,null);n["default"]=c.exports}},[["5065","common/runtime","common/vendor"]]]);