{"version":3,"sources":["webpack:///C:/Users/ZPC/Desktop/SchoolHelp-front-end/pages/my/setting/change-userInfo/upload.vue?4a08","webpack:///C:/Users/ZPC/Desktop/SchoolHelp-front-end/pages/my/setting/change-userInfo/upload.vue?d67c","webpack:///C:/Users/ZPC/Desktop/SchoolHelp-front-end/pages/my/setting/change-userInfo/upload.vue?229e","webpack:///C:/Users/ZPC/Desktop/SchoolHelp-front-end/pages/my/setting/change-userInfo/upload.vue?5704","webpack:///C:/Users/ZPC/Desktop/SchoolHelp-front-end/pages/my/setting/change-userInfo/upload.vue","webpack:///C:/Users/ZPC/Desktop/SchoolHelp-front-end/pages/my/setting/change-userInfo/upload.vue?a420","webpack:///C:/Users/ZPC/Desktop/SchoolHelp-front-end/pages/my/setting/change-userInfo/upload.vue?2c67"],"names":["device","uni","getSystemInfoSync","width","windowWidth","height","windowHeight","console","log","computed","data","cropperOpt","id","scale","zoom","cut","x","y","weCropper","methods","back","redirectTo","url","touchStart","e","touchMove","touchEnd","convertBase64UrlToBlob","dataURI","type","binary","atob","split","array","i","length","push","charCodeAt","Blob","Uint8Array","filename","blobToDataURL","blob","a","FileReader","readAsDataURL","onload","getRes","target","result","getCropperImage","_this","pathurl","api","urls","postHead","avatar","wx","that","uploadFile","filePath","name","header","token","success","res","showToast","title","icon","duration","fail","err","showModal","content","errMsg","showCancel","hideLoading","complete","uploadTap","self","chooseImage","count","sizeType","sourceType","src","tempFilePaths","pushOrign","onLoad","option","Object","assign","on","ctx","hideToast"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqF;AAC3B;AACL;AACa;;;AAGlE;AAC8J;AAC9J,gBAAgB,sKAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAA8lB,CAAgB,6mBAAG,EAAC,C;;;;;;;;;;;;ACAlnB;AAAA;AAAA;AAAA;AAA04B,CAAgB,s3BAAG,EAAC,C;;;;;;;;;;;;ACA95B;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiBA;;;;AAIA;AACA;AACA,0H,8FAvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASA,IAAMA,MAAM,GAAGC,GAAG,CAACC,iBAAJ,EAAf,CACA,IAAMC,KAAK,GAAGH,MAAM,CAACI,WAArB,CACA,IAAMC,MAAM,GAAGL,MAAM,CAACM,YAAP,GAAsB,EAArC,CACAC,OAAO,CAACC,GAAR,CAAYR,MAAZ,E,eACe,EACXS,QAAQ,EAAE,oBAAS,CAAC,UAAD,EAAa,UAAb,EAAyB,OAAzB,CAAT,CADC,EAEXC,IAFW,kBAEJ,CACH,OAAO,EACHC,UAAU,EAAE,EACRC,EAAE,EAAE,SADI,EAERT,KAAK,EAAEA,KAFC,EAGRE,MAAM,EAAEA,MAHA,EAIRQ,KAAK,EAAE,GAJC,EAKRC,IAAI,EAAE,CALE,EAMRC,GAAG,EAAE,EACDC,CAAC,EAAE,CAACb,KAAK,GAAG,GAAT,IAAgB,CADlB;AAEDc,WAAC,EAAE,CAACZ,MAAM,GAAG,GAAV,IAAiB,CAFnB;AAGDF,eAAK,EAAE,GAHN;AAIDE,gBAAM,EAAE,GAJP,EANG,EADT;;;AAcHa,eAAS,EAAE,EAdR,EAAP;;AAgBH,GAnBU;AAoBXC,SAAO,EAAE;AACLC,QADK,kBACE;AACHnB,SAAG,CAACoB,UAAJ,CAAe;AACXC,WAAG,EAAE,iBADM,EAAf;;AAGH,KALI;AAMLC,cANK,sBAMMC,CANN,EAMS;AACV,WAAKN,SAAL,CAAeK,UAAf,CAA0BC,CAA1B;AACH,KARI;AASLC,aATK,qBASKD,CATL,EASQ;AACT,WAAKN,SAAL,CAAeO,SAAf,CAAyBD,CAAzB;AACH,KAXI;AAYLE,YAZK,oBAYIF,CAZJ,EAYO;AACR,WAAKN,SAAL,CAAeQ,QAAf,CAAwBF,CAAxB;AACH,KAdI;AAeLG,0BAfK,kCAekBC,OAflB,EAe2BC,IAf3B,EAeiC;AAClC,UAAIC,MAAM,GAAGC,IAAI,CAACH,OAAO,CAACI,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAD,CAAjB;AACA,UAAIC,KAAK,GAAG,EAAZ;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,MAAM,CAACK,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpCD,aAAK,CAACG,IAAN,CAAWN,MAAM,CAACO,UAAP,CAAkBH,CAAlB,CAAX;AACH;AACD,aAAO,IAAII,IAAJ,CAAS,CAAC,IAAIC,UAAJ,CAAeN,KAAf,CAAD,CAAT,EAAkC;AACrCJ,YAAI,EAAEA,IAD+B,EAAlC;AAEJ;AACCW,gBAAQ,EAAE,UADX,EAFI,CAAP;;AAKH,KA1BI;AA2BLC,iBA3BK,yBA2BSC,IA3BT,EA2Be;AAChB,UAAIC,CAAC,GAAG,IAAIC,UAAJ,EAAR;AACAD,OAAC,CAACE,aAAF,CAAgBH,IAAhB,EAFgB,CAEO;AACvBC,OAAC,CAACG,MAAF,GAAW,UAAStB,CAAT,EAAY;AACnB,YAAIuB,MAAM,GAAGvB,CAAC,CAACwB,MAAF,CAASC,MAAtB,CADmB,CACW;AAC9B1C,eAAO,CAACC,GAAR,CAAYuC,MAAZ;AACH,OAHD;AAIH,KAlCI;AAmCLG,mBAnCK,6BAmCa;AACd,UAAIC,KAAK,GAAG,IAAZ;AACA,UAAIC,OAAO,GAAGC,aAAIC,IAAJ,CAASC,QAAvB;AACA;AACA,WAAKrC,SAAL,CAAegC,eAAf,CAA+B,UAAAM,MAAM,EAAI;AACrC,YAAIA,MAAJ,EAAY;AACR;AACA;AACAjD,iBAAO,CAACC,GAAR,CAAYgD,MAAZ;AACA;AACAC,YAAE,CAACpC,UAAH,CAAc;AACVC,eAAG,EAAE,4BAA4BkC,MADvB,EAAd;;AAGA,cAAIE,IAAI,GAAG,MAAX;AACA;AACAzD,aAAG,CAAC0D,UAAJ,CAAe;AACXrC,eAAG,EAAE8B,OADM;AAEXQ,oBAAQ,EAAEJ,MAFC;AAGXK,gBAAI,EAAE,OAHK;AAIXC,kBAAM,EAAE;AACJC,mBAAK,EAAEL,IAAI,CAACK,KADR,EAJG;;AAOXC,mBAAO,EAAE,iBAAAC,GAAG,EAAI;AACZ1D,qBAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CyD,GAA5C;AACAhE,iBAAG,CAACiE,SAAJ,CAAc;AACVC,qBAAK,EAAE,MADG;AAEVC,oBAAI,EAAE,SAFI;AAGVC,wBAAQ,EAAE,IAHA,EAAd;;AAKH,aAdU;AAeXC,gBAAI,EAAE,cAAAC,GAAG,EAAI;AACThE,qBAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgC+D,GAAhC;AACAtE,iBAAG,CAACuE,SAAJ,CAAc;AACVC,uBAAO,EAAEF,GAAG,CAACG,MADH;AAEVC,0BAAU,EAAE,KAFF,EAAd;;AAIA1E,iBAAG,CAAC2E,WAAJ;AACH,aAtBU;AAuBXC,oBAAQ,EAAE,oBAAM;AACZtE,qBAAO,CAACC,GAAR,CAAY,UAAZ;AACH,aAzBU,EAAf;;AA2BH,SArCD,MAqCO;AACHD,iBAAO,CAACC,GAAR,CAAY,cAAZ;AACH;AACJ,OAzCD;AA0CH,KAjFI;AAkFLsE,aAlFK,uBAkFO;AACR,UAAMC,IAAI,GAAG,IAAb;;AAEA9E,SAAG,CAAC+E,WAAJ,CAAgB;AACZC,aAAK,EAAE,CADK,EACF;AACVC,gBAAQ,EAAE,CAAC,YAAD,CAFE,EAEc;AAC1BC,kBAAU,EAAE,CAAC,OAAD,EAAU,QAAV,CAHA,EAGqB;AACjCnB,eAJY,mBAIJC,GAJI,EAIC;AACT,cAAImB,GAAG,GAAGnB,GAAG,CAACoB,aAAJ,CAAkB,CAAlB,CAAV;AACA;;AAEAN,cAAI,CAAC7D,SAAL,CAAeoE,SAAf,CAAyBF,GAAzB;AACH,SATW,EAAhB;;AAWH,KAhGI,EApBE;;AAsHXG,QAtHW,kBAsHJC,MAtHI,EAsHI;AACXjF,WAAO,CAACC,GAAR,CAAYL,KAAZ,EAAmBE,MAAnB,EAA2BL,MAA3B;AACA;AACA,QAAMW,UAAU,GAAG,KAAKA,UAAxB;AACA,QAAMyE,GAAG,GAAGI,MAAM,CAACJ,GAAnB;AACA,QAAIA,GAAJ,EAAS;AACLK,YAAM,CAACC,MAAP,CAAc/E,UAAd,EAA0B;AACtByE,WAAG,EAAHA,GADsB,EAA1B;;AAGA7E,aAAO,CAACC,GAAR,CAAY4E,GAAZ;AACA,WAAKlE,SAAL,GAAiB,IAAIA,kBAAJ,CAAcP,UAAd;AACZgF,QADY,CACT,OADS,EACA,UAASC,GAAT,EAAc;AACvBrF,eAAO,CAACC,GAAR,CAAY,OAAZ;AACH,OAHY;AAIZmF,QAJY,CAIT,iBAJS,EAIU,UAAAC,GAAG,EAAI;AAC1B3F,WAAG,CAACiE,SAAJ,CAAc;AACVC,eAAK,EAAE,KADG;AAEVC,cAAI,EAAE,SAFI;AAGVC,kBAAQ,EAAE,IAHA,EAAd;;AAKA9D,eAAO,CAACC,GAAR,CAAY,iBAAZ;AACH,OAXY;AAYZmF,QAZY,CAYT,WAZS,EAYI,UAAAC,GAAG,EAAI;AACpB3F,WAAG,CAAC4F,SAAJ;AACAtF,eAAO,CAACC,GAAR,CAAY,WAAZ;AACH,OAfY,CAAjB;AAgBH;AACJ,GAjJU,E;;;;;;;;;;;;AC5Bf,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pages/my/setting/change-userInfo/upload.js","sourcesContent":["import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=60e261cf&\"\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\ZPC\\\\Desktop\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('60e261cf', component.options)\n    } else {\n      api.reload('60e261cf', component.options)\n    }\n    module.hot.accept(\"./upload.vue?vue&type=template&id=60e261cf&\", function () {\n      api.rerender('60e261cf', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"SchoolHelp-front-end/pages/my/setting/change-userInfo/upload.vue\"\nexport default component.exports","import mod from \"-!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=template&id=60e261cf&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n    mapState,\n    mapMutations\n} from 'vuex';\nimport weCropper from '../../../../api/weCropper';\nimport store from \"@/store/index.js\";\nimport api from \"@/api/api.js\";\nconst device = uni.getSystemInfoSync();\nconst width = device.windowWidth;\nconst height = device.windowHeight - 50;\nconsole.log(device);\nexport default {\n    computed: mapState(['hasLogin', 'userInfo', 'token']),\n    data() {\n        return {\n            cropperOpt: {\n                id: 'cropper',\n                width: width,\n                height: height,\n                scale: 2.5,\n                zoom: 8,\n                cut: {\n                    x: (width - 295) / 2,\n                    y: (height - 413) / 2,\n                    width: 295,\n                    height: 413\n                }\n            },\n            weCropper: ''\n        };\n    },\n    methods: {\n        back() {\n            uni.redirectTo({\n                url: 'change-userInfo'\n            });\n        },\n        touchStart(e) {\n            this.weCropper.touchStart(e);\n        },\n        touchMove(e) {\n            this.weCropper.touchMove(e);\n        },\n        touchEnd(e) {\n            this.weCropper.touchEnd(e);\n        },\n        convertBase64UrlToBlob(dataURI, type) {\n            var binary = atob(dataURI.split(',')[1]);\n            var array = [];\n            for (var i = 0; i < binary.length; i++) {\n                array.push(binary.charCodeAt(i));\n            }\n            return new Blob([new Uint8Array(array)], {\n                type: type\n            }, {\n                filename: '1111.jpg'\n            });\n        },\n        blobToDataURL(blob) {\n            var a = new FileReader();\n            a.readAsDataURL(blob); //读取文件保存在result中\n            a.onload = function(e) {\n                var getRes = e.target.result; //读取的结果在result中\n                console.log(getRes);\n            };\n        },\n        getCropperImage() {\n            let _this = this;\n            let pathurl = api.urls.postHead;\n            // 上传服务器地址\n            this.weCropper.getCropperImage(avatar => {\n                if (avatar) {\n                    //  获取到裁剪后的图片\n                    //  获取到裁剪后的图片\n                    console.log(avatar);\n                    // this.blobToDataURL(avatar);\n                    wx.redirectTo({\n                        url: 'change-userInfo?avatar=' + avatar\n                    })\n                    var that = this\n                    //下面是上传到服务器的方法\n                    uni.uploadFile({\n                        url: pathurl,\n                        filePath: avatar,\n                        name: 'image',\n                        header: {\n                            token: that.token\n                        },\n                        success: res => {\n                            console.log('uploadImage success, res is:', res);\n                            uni.showToast({\n                                title: '上传成功',\n                                icon: 'success',\n                                duration: 1000\n                            });\n                        },\n                        fail: err => {\n                            console.log('uploadImage fail', err);\n                            uni.showModal({\n                                content: err.errMsg,\n                                showCancel: false\n                            });\n                            uni.hideLoading();\n                        },\n                        complete: () => {\n                            console.log('complate');\n                        }\n                    });\n                } else {\n                    console.log('获取图片失败，请稍后重试');\n                }\n            });\n        },\n        uploadTap() {\n            const self = this;\n\n            uni.chooseImage({\n                count: 1, // 默认9\n                sizeType: ['compressed'], // 可以指定是原图还是压缩图，默认二者都有\n                sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\n                success(res) {\n                    let src = res.tempFilePaths[0];\n                    //  获取裁剪图片资源后，给data添加src属性及其值\n\n                    self.weCropper.pushOrign(src);\n                }\n            });\n        }\n    },\n    onLoad(option) {\n        console.log(width, height, device);\n        // do something\n        const cropperOpt = this.cropperOpt;\n        const src = option.src;\n        if (src) {\n            Object.assign(cropperOpt, {\n                src\n            });\n            console.log(src);\n            this.weCropper = new weCropper(cropperOpt)\n                .on('ready', function(ctx) {\n                    console.log(\"reday\");\n                })\n                .on('beforeImageLoad', ctx => {\n                    uni.showToast({\n                        title: '上传中',\n                        icon: 'loading',\n                        duration: 3000\n                    });\n                    console.log(\"beforeImageLoad\");\n                })\n                .on('imageLoad', ctx => {\n                    uni.hideToast();\n                    console.log(\"imageLoad\");\n                });\n        }\n    }\n};\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}